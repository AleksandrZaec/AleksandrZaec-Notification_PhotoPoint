# Notification PhotoPoint

Сервис для надежной отправки уведомлений пользователям через multiple каналов (Email, SMS, Telegram) с автоматическим fallback механизмом.

### Основные возможности:

- Мультиканальная доставка уведомлений (Email/SMS/Telegram)
- Автоматический fallback - если один канал недоступен, сервис пробует другие
- Трекинг статусов доставки для каждого уведомления
- Асинхронная обработка через Celery
- Мониторинг через Flower
- Документированный API через Swagger/Redoc


## Стек технологий

- Backend: Django 5.2 + DRF
- База данных: PostgreSQL
- Брокер задач: Redis
- Асинхронные задачи: Celery
- Документация API: Swagger/Redoc
- Отправка email: Django SMTP
- Отправка SMS: SMSC.ru API
- Отправка в Telegram: Telegram Bot API


## Быстрый старт

### Установка (разработка)

### 1. Клонирование репозитория

```sh
 git clone https://github.com/AleksandrZaec/Notification_PhotoPoint.git
```

### 2. Настройка виртуального окружения

```sh
 poetry install
```

### 3. В корне проекта создайте файл окружения .env (основной файл конфигурации для запуска приложения),  файл можно создать но основе env_example


## Запуск через Docker

```sh
 docker-compose up -d --build
```

Сервисы будут доступны:

API: http://localhost:8000

Swagger: http://localhost:8000/swagger/

Flower (Celery monitoring): http://localhost:5555

## Основной эндпоинт

POST /api/notifications/

### Пример тела запроса:

```sh
 {
  "recipients": [
    {
      "email": "user@example.com",
      "phone_number": "79991234567",
      "telegram_id": "123456789"
    }
  ],
  "message": "Важное уведомление"
}
```
## Тестирование

Запуск тестов:
```sh
docker-compose run tests pytest
```

## Особенности реализации

1. Fallback механизм:

   - При неудачной доставке автоматически пробуются другие доступные каналы

   -  Логика реализована в Celery task send_via_channel

2. Надежность:

    - Все попытки доставки сохраняются в БД

    - Retry механизм для временных ошибок

3. Масштабируемость:

    - Асинхронная обработка через Celery

    - Возможность горизонтального масштабирования воркеров

## Дальнейшее развитие

- Добавить веб-интерфейс для мониторинга

- Реализовать шаблоны уведомлений

- Добавить систему очередей с приоритетами

- Реализовать вебхуки для статусов доставки